<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Pybonacci">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>157 cosas de IPython que no sabías y nunca preguntaste (II) | Pybonacci</title>

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" title="Pybonacci blog atom feed" href="/feeds/all.atom.xml" />
        <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/theme/css/fontello.css"/>
        <style>.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #60a0b0; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #007020; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #007020 } /* Comment.Preproc */
.highlight .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.highlight .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #007020 } /* Keyword.Pseudo */
.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #902000 } /* Keyword.Type */
.highlight .m { color: #40a070 } /* Literal.Number */
.highlight .s { color: #4070a0 } /* Literal.String */
.highlight .na { color: #4070a0 } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.highlight .no { color: #60add5 } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #007020 } /* Name.Exception */
.highlight .nf { color: #06287e } /* Name.Function */
.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #bb60d5 } /* Name.Variable */
.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #40a070 } /* Literal.Number.Float */
.highlight .mh { color: #40a070 } /* Literal.Number.Hex */
.highlight .mi { color: #40a070 } /* Literal.Number.Integer */
.highlight .mo { color: #40a070 } /* Literal.Number.Oct */
.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
.highlight .sc { color: #4070a0 } /* Literal.String.Char */
.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { color: #c65d09 } /* Literal.String.Other */
.highlight .sr { color: #235388 } /* Literal.String.Regex */
.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
.highlight .ss { color: #517918 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
.highlight .il { color: #40a070 } /* Literal.Number.Integer.Long */</style>
        <style>.description-author {
  font-size: 0.8em;
  color: #333;
}
.img-author {
  max-height: 10em;
  max-width: 10em;
}
img[src$="centerme"] {
  display: block;
  margin: 0 auto;
}
body {
  margin: 0;
  padding: 0;
  font: 'Source Sans Pro', sans-serif;
  color: #222222;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}
@media all and (min-width: 960px) {
  body {
    font-size: 20px;
  }
}
@media all and (max-width: 959px) and (min-width: 600px) {
  body {
    font-size: 16px;
  }
}
@media all and (max-width: 599px) and (min-width: 320px) {
  body {
    font-size: 14px;
  }
}
div.input_area {
  font-size: 1.1em;
  margin: 0 10%;
}
div.output_area {
  font-size: 1.1em;
  margin: 0 10%;
}
div.output_subarea {
  max-width: 100% !important;
}
pre {
  font-size: 1.1em;
}
p {
  margin-bottom: 20px;
  line-height: 1.6em;
  text-align: justify;
}
img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: 100%;
}
article {
  margin: 0;
}
article header.about {
  margin-bottom: 0px;
  padding-bottom: 0px;
}
article header {
  padding-bottom: 20px;
}
article header h1 {
  margin-bottom: 2px;
  font-weight: 700;
  color: #000;
}
article header time {
  color: #9E9E9E;
  float: right;
}
article header time.left {
  color: #9E9E9E;
  float: left;
}
article div.social-links ul {
  padding: 0px;
}
article div.social-links li {
  display: inline;
  font-size: 20px;
}
article div.social-links li a {
  color: #000;
  padding: 10px;
}
article div.social-links li a:hover {
  color: #666;
  text-decoration: none;
}
article p.note {
  background: #f5f5f5;
  border: 1px solid #ddd;
  padding: 0.533em 0.733em;
}
article p.update {
  background-color: #FEEFB3;
  border: 1px solid #e6e68a;
  padding: 0.533em 0.733em;
}
article p.alert {
  background-color: #ffe2e2;
  border: 1px solid #ffb2b2;
  padding: 0.533em 0.733em;
}
article a:hover {
  text-decoration: underline;
}
article blockquote {
  border-left: 2px solid #c7c7cc;
  color: #666;
  margin: 30px 0;
  padding: 0 0 0 25px;
}
article .meta {
  margin-top: 35px;
}
article .meta a:hover {
  text-decoration: none;
}
article .meta address:before,
article .meta time:before,
article .meta a.tag:before {
  font-family: 'fontello';
  margin-right: 6px;
}
article .meta address.author {
  float: left;
}
article .meta address:before {
  content: '\e819';
}
article .meta time:before {
  content: '\f133';
}
article .meta div.tags {
  clear: both;
}
article .meta a.tag {
  margin: 0 10px 10px 0;
  padding: 1px 12px;
  display: inline-block;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.8);
  background: rgba(0, 0, 0, 0.05);
}
article .meta a.tag:before {
  content: '\e821';
}
article .meta a.tag:hover {
  background: rgba(0, 0, 0, 0.15);
}
article .meta a.read_more,
article .meta a.comments_btn {
  font-size: 1.5em;
  font-weight: 800;
  padding: 10px 20px;
  color: #007aa3;
  background: #FFF;
  border: 1px solid #007aa3;
}
article .meta a.read_more:hover,
article .meta a.comments_btn:hover {
  color: #FFF;
  background: #007aa3;
}
article .meta:after {
  content: "";
  display: table;
  clear: both;
}</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <script data-isso="https://comments.pybonacci.org"
                data-isso-lang="es"
                src="https://comments.pybonacci.org/js/embed.min.js"></script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            }
        });
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>


        </script>

    </head>

    <body>
        <header class="navbar navbar-default bs-docs-nav">
            <div class="container-fluid">
                <div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#theNavbar">
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span> 
		  </button>
                  <a class="navbar-brand" href="/" title="Home" class="title">Pybonacci</a><!-- — Python y Ciencia-->
                </div>
                <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation" id="theNavbar">
		    <ul class="nav navbar-nav navbar-right">
                            <li><a href="/pages/acerca-de-pybonacci.html" title="About">Acerca de</a></li>
			    <li><a href="/pages/como-contribuir.html" title="Contributing">Contribuir</a></li>
                            <li><a href="/archives.html" title="Archive">Archivos</a></li>
                            <li><a class="nodec icon-rss" href="/feeds/all.atom.xml" title="pybonacci.github.io RSS feed" rel="me"></a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <div id="wrap">
<div class="container post">
    <article>
        <header>
            <h1>157 cosas de IPython que no sabías y nunca preguntaste (II)</h1>
            <div class="meta">
                <time datetime="article.date.isoformat()" pubdate>mié 29 enero 2014</time>
                <address class="vcard author">Por
                    <a class="url fn" href="http://pybonacci.github.io/author/kiko-correoso.html">Kiko Correoso</a>
                </address>
            </div>
        </header>

        <div class="article_content">
            <p>En la <a href="https://pybonacci.org/2014/01/24/157-cosas-de-ipython-que-no-sabias-y-nunca-preguntaste-i/">primera entrega</a> vimos como usar la ayuda de IPython y como personalizar nuestras propias funciones mágicas de ayuda.</p>
<p>En esta segunda entrega vamos a hablar del uso de la historia dentro de IPython.</p>
<p>[Inciso: Os recomiendo que veáis lo que viene a continuación en el <a href="https://github.com/Pybonacci/notebooks">notebook</a> o en 
<a href="http://nbviewer.ipython.org/">nbviewer</a>.]</p>
<p>IPython guarda la historia de los comandos que se usan en cada línea/celda 
de cada sesión bajo un determinado perfil. Esta información se guarda en 
una base de datos sqlite. Por defecto, se guardan el inicio y fin de 
sesión, los comandos usados en cada sesión y algunos metadatos más. 
IPython también se puede configurar para que almacene los outputs.</p>
<h1>Historia</h1>
<p>La base de datos con la historia se guarda en la carpeta que obtenéis haciendo lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span>
</pre></div>


<p>Y la base de datos se guardará en esa carpeta con el nombre history.sqlite.</p>
<p>Una forma alternativa de obtener la ruta a la historia bajo el perfil 
actual es usando lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span>
</pre></div>


<h1>Acceso a determinadas celdas de la historia</h1>
<p>Para reusar comandos ya usados podemos hacer uso de la <strong>historia</strong> que 
guarda IPython en cada sesión.</p>
<ul>
<li>Podemos usar las teclas de cursor hacia arriba o hacia abajo para recorrer los últimos comandos usados (esto no funciona en el notebook pero sí en la consola de IPython).</li>
<li>Si escribimos algo en la línea de comandos y pulsamos el cursor hacia arriba nos mostrará solo lo que comience por lo ya escrito en la línea de comandos (nuevamente, esto no funciona en el notebook pero sí en la consola de IPython).</li>
<li>En las sesiones interactivas, el <em>input</em> y el <em>output</em> se guarda en las variables <strong>In</strong> y <strong>Out</strong>. Poniendo el índice de la línea usada nos volverá a ejecutar esa línea, en el caso de que usemos la variable <strong>In</strong> o nos mostrará el <em>output</em> en caso de que usemos la variable <strong>Out</strong>. <strong>In</strong> es una lista mientras que <strong>Out</strong> es un diccionario. En el caso de que no haya <em>output</em> para un número de línea nos dará un <strong>KeyError</strong>. Por ejemplo, veamos las siguientes celdas de código:</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">In</span><span class="err">?</span>
</pre></div>


<p>Nos mostrará en pantalla lo siguiente (esto puede variar en función de 
lo que hayáis escrito previamente en la consola o el notebook, lo 
siguiente solo sirve como ejemplo):</p>
<div class="highlight"><pre><span></span><span class="n">Type</span><span class="p">:</span>       <span class="nb">list</span>
<span class="n">String</span> <span class="n">Form</span><span class="p">:[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s2">&quot;get_ipython().magic(&#39;pinfo In&#39;)&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ipython().magic(&#39;pinfo In&#39;)&quot;</span><span class="p">]</span>
 <span class="n">Length</span><span class="p">:</span>     <span class="mi">3</span>
 <span class="n">Docstring</span><span class="p">:</span>
<span class="nb">list</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="n">empty</span> <span class="nb">list</span>
<span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="nb">list</span> <span class="n">initialized</span> <span class="kn">from</span> <span class="nn">iterable</span><span class="s1">&#39;s items</span>
</pre></div>


<p>Mientras que si hacemos lo mismo para <strong>Out</strong> obtendremos la siguiente 
info (esto puede variar en función de lo que hayáis escrito previamente 
en la consola o el notebook, lo siguiente solo sirve como ejemplo):</p>
<div class="highlight"><pre><span></span><span class="n">Type</span><span class="p">:</span>       <span class="nb">dict</span>
<span class="n">String</span> <span class="n">Form</span><span class="p">:{}</span>
<span class="n">Length</span><span class="p">:</span>     <span class="mi">0</span>
<span class="n">Docstring</span><span class="p">:</span>
<span class="nb">dict</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="n">empty</span> <span class="n">dictionary</span>
<span class="nb">dict</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="n">dictionary</span> <span class="n">initialized</span> <span class="kn">from</span> <span class="nn">a</span> <span class="nn">mapping</span> <span class="nn">object</span><span class="s1">&#39;s</span>
    <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="n">pairs</span>
<span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="n">dictionary</span> <span class="n">initialized</span> <span class="k">as</span> <span class="k">if</span> <span class="n">via</span><span class="p">:</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<span class="nb">dict</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">new</span> <span class="n">dictionary</span> <span class="n">initialized</span> <span class="k">with</span> <span class="n">the</span> <span class="n">name</span><span class="o">=</span><span class="n">value</span> <span class="n">pairs</span>
    <span class="ow">in</span> <span class="n">the</span> <span class="n">keyword</span> <span class="n">argument</span> <span class="nb">list</span><span class="o">.</span>  <span class="n">For</span> <span class="n">example</span><span class="p">:</span>  <span class="nb">dict</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>


<p>Si ahora hacemos lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>


<p>Nos mostrará un <strong>2</strong> en pantalla pero no lo guarda en el <em>Output</em> 
puesto que solo es visualización. Por tanto, lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="n">Out</span>
</pre></div>


<p>Nos mostrará (esto puede variar en función de lo que hayáis escrito 
previamente en la consola o el notebook, lo siguiente solo sirve como ejemplo):</p>
<div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">}</span>
</pre></div>


<p>Vemos que en <strong>Out</strong> se encuentra lo que hemos obtenido en las primeras 
celdas de código. Si ahora queremos ver otro <em>output</em> podemos hacer lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="n">a</span>
</pre></div>


<p>Y, como no lo hemos mostrado con un <code>print</code>, se añade al <em>Output</em>.</p>
<div class="highlight"><pre><span></span><span class="n">Out</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span><span class="p">,</span>
 <span class="mi">7</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>


<p>Vemos que ya tenemos algún valor para el <strong>Out</strong> y ya podremos acceder 
a ese valor por si lo quisiéramos usar en alguna otra celda. Por 
ejemplo, de la siguiente forma:</p>
<div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>


<p>Nos mostraría <strong>2</strong> en pantalla.</p>
<p>Como el <strong>In</strong> siempre lo tendremos, en lugar de ser un diccionario es 
una lista y podemos acceder al valor de la celda usando el índice de la 
misma. Por ejemplo:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">celda</span> <span class="ow">in</span> <span class="n">In</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">celda</span><span class="p">)</span>
</pre></div>


<p>Nos mostraría lo siguiente (o algo aproximado a lo siguiente):</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">magic</span><span class="p">(</span><span class="s1">&#39;pinfo In&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">for</span> <span class="n">celda</span> <span class="ow">in</span> <span class="n">In</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">celda</span><span class="p">)</span>
</pre></div>


<p>También podemos acceder a los tres últimos <em>outputs</em> de las tres últimas 
celdas usando _, \<em>_, __</em>, que nos mostrará el <em>output</em> de la 
última, penúltima o antepenúltima celdas usadas, respectivamente.</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">___</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">__</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">antepenúltima</span><span class="p">:</span>
 <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/.</span><span class="n">config</span><span class="o">/</span><span class="n">ipython</span><span class="o">/</span><span class="n">profile_default</span> 
<span class="n">penúltima</span><span class="p">:</span>
 <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/.</span><span class="n">config</span><span class="o">/</span><span class="n">ipython</span><span class="o">/</span><span class="n">profile_default</span><span class="o">/</span><span class="n">history</span><span class="o">.</span><span class="n">sqlite</span> 
<span class="err">ú</span><span class="n">ltima</span><span class="p">:</span>
 <span class="mi">2</span>
 <span class="sb">``</span><span class="err">`</span>

<span class="n">Si</span> <span class="n">queremos</span> <span class="n">acceder</span> <span class="n">a</span> <span class="n">los</span> <span class="n">_inputs_</span> <span class="n">de</span> <span class="n">las</span> <span class="err">ú</span><span class="n">ltimas</span> <span class="n">celdas</span> <span class="n">podemos</span> <span class="n">usar</span> 
<span class="n">algo</span> <span class="n">parecido</span> <span class="n">pero</span> <span class="n">de</span> <span class="n">la</span> <span class="n">siguiente</span> <span class="n">forma</span><span class="p">,</span> \<span class="n">_i</span><span class="p">,</span> \<span class="n">_ii</span> <span class="n">o</span> <span class="n">_iii</span> <span class="n">para</span> <span class="n">la</span> 
<span class="err">ú</span><span class="n">ltima</span><span class="p">,</span> <span class="n">penúltima</span> <span class="n">o</span> <span class="n">antepenúltima</span> <span class="n">celda</span> <span class="n">de</span> <span class="n">_input_</span><span class="p">:</span>

<span class="sb">``</span><span class="err">`</span><span class="n">python</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">_iii</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">_ii</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_i</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">antepenúltima</span><span class="p">:</span>
 <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> 
<span class="n">penúltima</span><span class="p">:</span>
 <span class="k">for</span> <span class="n">celda</span> <span class="ow">in</span> <span class="n">In</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">celda</span><span class="p">)</span> 
<span class="err">ú</span><span class="n">ltima</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">___</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">__</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
</pre></div>


<p>Análogamente a lo visto anteriormente, podemos usar __n_ o <em>i_n</em> 
para mostrar, respectivamente, el <em>output</em> o el <em>input</em> de la celda <em>n</em>. 
Por ejemplo, para ver el <em>input</em> y el <em>output</em> de la celda anterior (en 
este caso sería la 11) podemos hacer lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;El input de la celda 11 es:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">_i11</span><span class="p">)</span>
</pre></div>


<p>Que nos mostrará:</p>
<div class="highlight"><pre><span></span><span class="n">El</span> <span class="nb">input</span> <span class="n">de</span> <span class="n">la</span> <span class="n">celda</span> <span class="mi">11</span> <span class="n">es</span><span class="p">:</span>
<span class="k">for</span> <span class="n">celda</span> <span class="ow">in</span> <span class="n">In</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">celda</span><span class="p">)</span>
</pre></div>


<p>Y para el <em>output</em>:</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Te he engañado. No existe output para la celda 11&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Si intentas acceder al valor _11 obtendrás un NameError ya que no existe la variable&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;pero te puedo enseñar el de la celda 7:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">_7</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">Te</span> <span class="n">he</span> <span class="n">engañado</span><span class="o">.</span> <span class="n">No</span> <span class="n">existe</span> <span class="n">output</span> <span class="n">para</span> <span class="n">la</span> <span class="n">celda</span> <span class="mi">11</span>
<span class="n">Si</span> <span class="n">intentas</span> <span class="n">acceder</span> <span class="n">al</span> <span class="n">valor</span> <span class="n">_11</span> <span class="n">obtendrás</span> <span class="n">un</span> <span class="ne">NameError</span> <span class="n">ya</span> <span class="n">que</span> <span class="n">no</span> <span class="n">existe</span> <span class="n">la</span> <span class="n">variable</span>
<span class="n">pero</span> <span class="n">te</span> <span class="n">puedo</span> <span class="n">enseñar</span> <span class="n">el</span> <span class="n">de</span> <span class="n">la</span> <span class="n">celda</span> <span class="mi">7</span><span class="p">:</span>
<span class="mi">2</span>
</pre></div>


<p>Lo anterior es equivalente a usar <strong>In[n]</strong> o <strong>Out[n]</strong>. Una tercera 
alternativa, además, sería usar <strong>_ih[n]</strong> para los <em>inputs</em> y 
<strong>_oh[n]</strong> para los <em>outputs</em>.</p>
<div class="highlight"><pre><span></span><span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
</pre></div>


<p>Mostrará:</p>
<div class="highlight"><pre><span></span><span class="s1">&#39;for celda in In:n    print(celda)&#39;</span>
</pre></div>


<p>Mientras que:</p>
<div class="highlight"><pre><span></span><span class="n">_ih</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
</pre></div>


<p>Nos mostrará lo mismo:</p>
<div class="highlight"><pre><span></span><span class="s1">&#39;for celda in In:n    print(celda)&#39;</span>
</pre></div>


<h1>Acceso a bloques de historia</h1>
<p>Para acceder a toda la historia de la sesión actual podemos usar las 
funciones mágicas <strong>%history</strong> o <strong>%hist</strong>, que es un alias.</p>
<p>Podemos obtener toda la historia o solo una porción. Por ejemplo, el 
siguiente comando nos mostrará la historia desde la celda 1 a la 10 en 
la sesión actual:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">In</span><span class="err">?</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>


<p>Si, además de acceder a las celdas 1 a 10, queremos acceder a celdas 
sueltas podemos usar la siguiente notación para acceder a las celdas 
12 y 14 (además de a las 10 primeras).</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span> <span class="mi">12</span> <span class="mi">14</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">In</span><span class="err">?</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">___</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">__</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;El input de la celda 11 es:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">_i11</span><span class="p">)</span>
</pre></div>


<p>Si ahora queremos acceder a todas las celdas donde hayamos usado, por 
ejemplo, un comando que incluya 'a = 1' podemos hacer uso de la opción 
<strong>-g</strong> (similar a grep) de la siguiente forma (la salida dependerá de 
vuestra historia):</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">29</span><span class="o">/</span><span class="mi">129</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">133</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">136</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">1.1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">138</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">142</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">1.1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">145</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">147</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">149</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">29</span><span class="o">/</span><span class="mi">151</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">51</span><span class="o">/</span><span class="mi">7</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">185</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">187</span><span class="o">/</span><span class="mi">19</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">187</span><span class="o">/</span><span class="mi">20</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">]</span>
<span class="mi">187</span><span class="o">/</span><span class="mi">21</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">188</span><span class="o">/</span><span class="mi">20</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">189</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">190</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">190</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">190</span><span class="o">/</span><span class="mi">4</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">190</span><span class="o">/</span><span class="mi">10</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a = 1:</span>
<span class="s2">        print(a)</span>
<span class="s2">    elseif a =2:</span>
<span class="s2">        print(a)</span>
<span class="s2">    else:</span>
<span class="s2">        print(&#39;kk&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a = 1:</span>
<span class="s2">        print(a)</span>
<span class="s2">    elif a =2:</span>
<span class="s2">        print(a)</span>
<span class="s2">    else:</span>
<span class="s2">        print(&#39;kk&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">5</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a = 1:</span>
<span class="s2">        print(a)</span>
<span class="s2">    elif a = 2:</span>
<span class="s2">        print(a)</span>
<span class="s2">    else:</span>
<span class="s2">        print(&#39;kk&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">14</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">15</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">16</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">17</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">43</span><span class="p">:</span> <span class="k">def</span> <span class="nf">a</span><span class="p">():</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="n">a</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">45</span><span class="p">:</span> <span class="k">def</span> <span class="nf">a</span><span class="p">():</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="k">return</span> <span class="n">a</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">46</span><span class="p">:</span> <span class="k">def</span> <span class="nf">a</span><span class="p">():</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="k">return</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">81</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a == 1:</span>
<span class="s2">        print(&#39;a=1&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        print(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            print(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">85</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a == 1:</span>
<span class="s2">        print(&#39;a=1&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        print(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            print(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">93</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def hello():</span>
<span class="s2">    if a == 1:</span>
<span class="s2">        return(&#39;a=1&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">135</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">hello()</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">157</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="n">Hola</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="n">Hola</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">hello()</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">158</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;Hola&#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="n">Hola</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">hello()</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">159</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;Hola&#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">hello()</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">174</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    Hola</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">hello()</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">219</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    Hola</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">print(hello())</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">230</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    Hola</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">        pass</span>
<span class="s2">print(hello())</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">233</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    Hola</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">        pass</span>
<span class="s2">print(hello())</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">201</span><span class="o">/</span><span class="mi">237</span><span class="p">:</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">a = 1</span>
<span class="s2">def hello():</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    Hola</span>
<span class="s2">    &#39;&#39;&#39;</span>
<span class="s2">    # esto es un comentario de mierda</span>
<span class="s2">    if a == 1:</span>
<span class="s2">    # esto es otro comentario</span>
<span class="s2">        return(&#39;a=1 # esto no sería un comentario&#39;)</span>
<span class="s2">    elif a == 2:</span>
<span class="s2">        return(&#39;a=2&#39;)</span>
<span class="s2">    else:</span>
<span class="s2">        if a == 3:</span>
<span class="s2">            return(&#39;a=3&#39;)</span>
<span class="s2">    return None</span>
<span class="s2">class A():</span>
<span class="s2">    &quot;Hola&quot;</span>
<span class="s2">    def __init__(self):</span>
<span class="s2">        &quot;Hola&quot;</span>
<span class="s2">        pass</span>
<span class="s2">    def _kk(self):</span>
<span class="s2">        &#39;Adios&#39;</span>
<span class="s2">        pass</span>
<span class="s2">print(hello())</span>
<span class="s2">help(A)</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="mi">202</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">202</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">202</span><span class="o">/</span><span class="mi">4</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">202</span><span class="o">/</span><span class="mi">5</span><span class="p">:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">214</span><span class="o">/</span><span class="mi">20</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="mi">20</span><span class="p">:</span> <span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>


<p>[Gracias a la historia sé que escribo demasiado código estúpido... :-(]</p>
<p>Pero esta busqueda no se restringe a la historia de la sesión actual 
sino que buscará en toda la historia almacenada por IPython bajo el perfil 
que estemos usando. El anterior <em>output</em> indica la sesión, el número de 
línea/celda de esa sesión y el código usado en esa línea/celda con la 
siguiente notación:</p>
<p><em>Sesión/celda: Código_introducido_en_la_celda</em></p>
<p>En este caso, podéis ver que en la última línea no se indica el número 
de sesión puesto que se refiere a la sesión actual:</p>
<p>Si usamos la opción <strong>-o</strong> también obtendremos la historia con el 
<em>output</em> incluido. Podéis ver el siguiente ejemplo para ver como funciona:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">o</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span>
<span class="n">In</span><span class="err">?</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span><span class="p">}</span>
<span class="n">a</span>
<span class="mi">2</span>
<span class="n">Out</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span><span class="p">,</span>
 <span class="mi">7</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">for</span> <span class="n">celda</span> <span class="ow">in</span> <span class="n">In</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">celda</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">___</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">__</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;antepenúltima:n&#39;</span><span class="p">,</span> <span class="n">_iii</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;penúltima:n&#39;</span><span class="p">,</span> <span class="n">_ii</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;última:n&#39;</span><span class="p">,</span> <span class="n">_i</span><span class="p">,</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;El input de la celda 11 es:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">_i11</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Te he engañado. No existe output para la celda 11&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Si intentas acceder al valor _11 obtendrás un NameError ya que no existe la variable&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;pero te puedo enseñar el de la celda 7:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">_7</span><span class="p">)</span>
<span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
<span class="s1">&#39;for celda in In:n    print(celda)&#39;</span>
<span class="n">_ih</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
<span class="s1">&#39;for celda in In:n    print(celda)&#39;</span>
<span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span>
<span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span> <span class="mi">12</span> <span class="mi">14</span>
<span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">g</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">o</span>
</pre></div>


<p>Otra cosa interesante es la opción <strong>-p</strong>, que coloca un <em>prompt</em> 
delante de cada línea de la historia que se muestra. Esto puede ser 
útil para, por ejemplo, escribir <em>doctests</em>.</p>
<p>En el siguiente ejemplo vamos a usar la opción <em>-p</em> junto con la opción <em>-o</em>:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">-</span><span class="n">po</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="o">...</span> <span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="o">...</span>
<span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">In</span><span class="err">?</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Out</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Out</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default&#39;</span><span class="p">,</span>
 <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;/home/kiko/.config/ipython/profile_default/history.sqlite&#39;</span><span class="p">,</span>
 <span class="mi">7</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>


<p>Si queremos guardar la historia o parte de la historia en un fichero 
para, por ejemplo, los <em>doctests</em>, podemos usar la opción <strong>-f</strong>.</p>
<p>Con la siguiente línea de código vamos a guardar el <em>input</em>, el 
<em>output</em> y vamos a colocar la línea del <em>prompt</em> de las 10 primeras 
celdas en un fichero llamado <strong>kk.txt</strong>:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span> <span class="o">-</span><span class="n">pof</span> <span class="n">kk</span><span class="o">.</span><span class="n">txt</span>
</pre></div>


<p>Si queremos acceder a la historia de una sesión anterior podemos usar lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">~</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">-</span><span class="mi">10</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">In</span><span class="err">?</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>


<p>De esta forma accederemos a las 10 primeras líneas de la sesión anterior. 
Si queremos acceder a las 10 primeras líneas de la penúltima sesión podemos hacer:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">~</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">-</span><span class="mi">10</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">In</span><span class="err">?</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
</pre></div>


<p>Si, además, queréis numerar las celdas usadas podéis usar la opción <strong>-n</strong>:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="o">~</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">-</span><span class="mi">10</span> <span class="o">-</span><span class="n">n</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">213</span><span class="o">/</span><span class="mi">1</span><span class="p">:</span>
<span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span> <span class="n">In</span><span class="err">?</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">4</span><span class="p">:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">5</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">6</span><span class="p">:</span> <span class="n">Out</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">7</span><span class="p">:</span> <span class="n">a</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">8</span><span class="p">:</span> <span class="n">Out</span>
<span class="mi">213</span><span class="o">/</span><span class="mi">9</span><span class="p">:</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
</pre></div>


<p>Algunos de los comandos usados no son aceptados por un intérprete 
Python cualquiera, como por ejemplo los comandos mágicos que empiezan 
por <strong>%</strong>. Por ello, podemos obtener los comandos ya traducidos a código 
Python ejecutable usando la opción <strong>-t</strong> de la historia:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">hist</span> <span class="mi">1</span><span class="o">-</span><span class="mi">10</span> <span class="o">-</span><span class="n">t</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.utils</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">path</span><span class="o">.</span><span class="n">locate_profile</span><span class="p">()</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">history_manager</span><span class="o">.</span><span class="n">hist_file</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">magic</span><span class="p">(</span><span class="s1">&#39;pinfo In&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">Out</span>
<span class="n">a</span>
<span class="n">Out</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>


<p>En la tercera línea podéis ver que en lugar de escribir <strong>%pinfo In</strong> 
ha escrito <strong>get_ipython().magic('pinfo In')</strong>.</p>
<h1>Acceso a la historia de los directorios usados</h1>
<p><strong>_dh</strong> (también podemos usar <strong>%dhist</strong>) nos da información de los 
directorios recorridos. Por ejemplo, voy a recorrer varios directorios y 
después veremos la historia de los directorios recorridos:</p>
<div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">pwd</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="s1">&#39;/home/kiko/pyprojs&#39;</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span><span class="o">/</span><span class="n">ipython</span><span class="o">-</span><span class="n">master</span><span class="o">/</span><span class="n">nb</span><span class="o">/</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span><span class="o">/</span><span class="n">ipython</span><span class="o">-</span><span class="n">master</span><span class="o">/</span><span class="n">nb</span>
</pre></div>


<p>Si ahora escribimos:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">dhist</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">Directory</span> <span class="n">history</span> <span class="p">(</span><span class="n">kept</span> <span class="ow">in</span> <span class="n">_dh</span><span class="p">)</span>
<span class="mi">0</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span><span class="o">/</span><span class="n">ipython</span><span class="o">-</span><span class="n">master</span><span class="o">/</span><span class="n">nb</span>
<span class="mi">1</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span>
<span class="mi">2</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kiko</span><span class="o">/</span><span class="n">pyprojs</span><span class="o">/</span><span class="n">ipython</span><span class="o">-</span><span class="n">master</span><span class="o">/</span><span class="n">nb</span>
</pre></div>


<p>O algo, más o menos, equivalente:</p>
<div class="highlight"><pre><span></span><span class="n">_dh</span>
</pre></div>


<p>En este caso nos devuelve una lista:</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;/home/kiko/pyprojs/ipython-master/nb&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/home/kiko/pyprojs&#39;</span><span class="p">,</span>
 <span class="s1">&#39;/home/kiko/pyprojs/ipython-master/nb&#39;</span><span class="p">]</span>
</pre></div>


<p>Si solo quiero saber el directorio del que partí en la sesión de 
IPython en la que me encuentro puedo hacer lo siguiente:</p>
<div class="highlight"><pre><span></span><span class="n">_dh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>


<p>Y obtengo:</p>
<div class="highlight"><pre><span></span><span class="s1">&#39;/home/kiko/pyprojs/ipython-master/nb&#39;</span>
</pre></div>


<p>Y esto es todo de momento. Podéis combinar muchas cosas de las vistas 
aquí con cosas como %macro, %edit, %pastebin,... Si da tiempo, algo muy 
caro últimamente, hablaremos sobre algunas cosas que se me ocurren en 
próximas entregas.</p>
<p>Saludos y hasta la próxima entrega.</p>
<p>P.D.: Si veis alguna errata podéis usar los comentarios o mandar algún 
commit <a href="https://github.com/Pybonacci/notebooks">al repositorio de los notebooks</a>.</p>
        </div>

        <div class="meta">
            <div class="tags">
                    <a href="http://pybonacci.github.io/tag/ipynb.html" class="tag">ipynb</a>
                    <a href="http://pybonacci.github.io/tag/ipython.html" class="tag">ipython</a>
                    <a href="http://pybonacci.github.io/tag/notebook.html" class="tag">notebook</a>
            </div>
        </div>

  
<hr>    
<div class="row">
  <div class="col-md-2">
    <img src=https://pybonacci.org/images/author/kiko-correoso.jpg alt="photo" class="img-author img-rounded"/>
  </div>
  <div class="col-md-1"></div>
  <div class="col-md-9 description-author">
    <p>Kiko es doctor en ciencias físicas y esta especializado en física de la atmósfera, meteorología y climatología. Además de estar en las nubes es especialista en temas de energías renovables en Iberdrola. Ávido de seguir mejorando siempre está abierto a participar en nuevos proyectos y retos por lo que no dudes en contactarle si necesitas servicios especializados de Python o meteorología.
</p>
  </div>
</div> 

    </article>
<section id="isso-thread">
    <h3>Comentarios</h3>
</section>
</div>

<style type="text/css">
{
    max-width: 700px;
}

.text_cell .prompt {
    display: none;
}

div.cell {
    padding: 0;
}

div.text_cell_render {
    padding: 0;
}

div.prompt {
    font-size: 13px;
}

div.input_prompt {
    padding: .7em 0.2em;
}

div.output_prompt {
    padding: .4em .2em;
}

div.input_area {
}

table.dataframe {
    font-family: Arial, sans-serif;
    font-size: 13px;
    line-height: 20px;
}

table.dataframe th, td {
    padding: 4px;
    text-align: left;
}

pre code {
    background-color: inherit;
}</style>

        </div>

        <footer class="disclaimer">
          <div class="container-fluid">
            <p>
              © 2012-2018 Pybonacci, licencia <a href="https://github.com/Pybonacci/pybonacci.github.io/blob/sources/LICENSE.md"> CC BY-SA 4.0 + MIT</a>
              salvo otra indicación.
              <p>Contenido generado con <a href= "http://docs.getpelican.com/">Pelican</a>.</p>
            </p>
          </div>
        </footer>

    </body>
</html>